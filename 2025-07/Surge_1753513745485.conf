#!MANAGED-CONFIG https://xddpma.oss-cn-shanghai.aliyuncs.com/Surge.conf interval=86400 strict=true

[General]
# ========= 基础功能设置 =========
# ＞ 日志等级：通知级别记录，推荐设置，适中不冗余
loglevel = notify

# ＞ 拒绝请求展示错误页面（建议开启便于排查）
show-error-page-for-reject = true

# ＞ 允许 WiFi 网络访问 API 控制器（关闭更安全）
allow-wifi-access = false

# ＞ 允许个人热点访问
allow-hotspot-access = false

# ＞ 启用 Hybrid 并发模式，提高连接成功率与多栈兼容性
all-hybrid = true

# > 兼容模式(若需要使用Homekit摄像头，可以开启兼容模式，但开启兼容模式会导致一些屏蔽广告的模块失效，请自行取舍)
# compatibility-mode = 5

# ＞ 设置连接测试超时时间（秒）
test-timeout = 3

# ========= 网络连通性与测试 =========
# ＞ 网络连通性测试地址（判断是否掉线）
internet-test-url = http://wifi.vivo.com.cn

# ＞ 节点测速地址（用于 url-test/fallback 组）
proxy-test-url = http://www.gstatic.com/generate_204

# ＞ 默认 UDP 测试参数
proxy-test-udp = apple.com@8.8.8.8

# ========= DNS 设置 =========
# ＞ 基础 DNS 服务器（优选国内稳定服务）
dns-server = 114.114.114.114, 223.5.5.5

# ＞ DoH 加密 DNS 服务（增强隐私）
# encrypted-dns-server = https://223.5.5.5/dns-query, https://doh.pub/dns-query

# ＞ 加密 DNS 是否跳过证书验证
encrypted-dns-skip-cert-verification = false

# ＞ 加密 DNS 是否跟随策略组
encrypted-dns-follow-outbound-mode = false

# ＞ 代理连接是否查本地 hosts
use-local-host-item-for-proxy = true

# ＞ 读取 /etc/hosts 文件
read-etc-hosts = true

# ＞ 排除无后缀简单主机名
exclude-simple-hostnames = true

# ＞ 劫持所有 53 端口 DNS 请求
hijack-dns = *:53

# ========= GeoIP 设置 =========
# ＞ GeoIP 数据库路径（提高匹配准确率）
geoip-maxmind-url = https://testingcf.jsdelivr.net/gh/Hackl0us/GeoIP2-CN@release/Country.mmdb

# ＞ 禁止自动更新 GeoIP 数据库（建议保持稳定）
disable-geoip-db-auto-update = false

# ========= 网络增强选项 =========
# ＞ 禁用 IPv6
ipv6 = false

# ＞ 禁用 IPv6 虚拟接口
ipv6-vif = disabled

# ＞ WiFi 辅助功能（弱网时自动切换到蜂窝）
wifi-assist = true

# ＞ 优先处理 UDP（游戏/语音更稳定）
udp-priority = true

# ========= 网络控制策略 =========
# ＞ 跳过代理的内网与回环 IP
skip-proxy = 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12, 127.0.0.1, localhost, *.local, fe80::/10, fc00::/7, fd00::/8, ::1

# ＞ 使用真实 IP 域名（如游戏平台）
always-real-ip = *.srv.nintendo.net, *.stun.playstation.net, xbox.*.microsoft.com, *.xboxlive.com, *.battlenet.com.cn, *.battlenet.com, *.blzstatic.cn, *.battle.net, stun.ugreengroup.com

# ＞ 接管所有网络流量
include-all-networks = false

# ＞ 接管本地网络（Bonjour/NAS）
include-local-networks = false

# ＞ 接管蜂窝网络请求
include-cellular-services = false

# ＞ 策略不支持 UDP 时如何处理
udp-policy-not-supported-behaviour = DIRECT

# ========= 控制台设置 =========
# ＞ 启用 Web 控制面板
http-api-web-dashboard = false

# ＞ 控制台访问地址
# http-api = 123@0.0.0.0:6171

# ＞ 是否使用 https api
# http-api-tls = false

# ＞ 控制台访问地址
# external-controller-access = 123@0.0.0.0:6170

# ========= 协议/性能优化 =========
# ＞ 是否阻止 QUIC 协议
# block-quic = always-allow

# ========= 其他配置示例（按需开启） =========
# ＞ 隐藏状态栏 VPN 图标（仅限部分系统支持）
#hide-vpn-icon = true

# ＞ 排除内网路由走 TUN
# tun-excluded-routes = 192.168.0.0/16, 10.0.0.0/8

# ＞ 指定 IP 强制走 TUN
# tun-included-routes = 192.168.1.12/32

[Proxy Group]
# > 策略组
节点选择 = select, 香港节点, 台湾节点, 美国节点, 日本节点, 新加坡节点, 所有节点, icon-url=https://testingcf.jsdelivr.net/gh/Irrucky/Tool/Surge/icon/surge_2.png
人工智能 = smart, include-other-group=所有节点, policy-regex-filter=(?=.*红杏云)(?=.*美国)|(?=.*hello)(?=.*美国)(?=.*家宽), icon-url=https://testingcf.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/AI.png
YouTube = smart, include-other-group=所有节点, policy-regex-filter=(?=.*良心云)(?=.*香港)|(?=.*红杏云)(?=.*香港), icon-url=https://testingcf.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/YouTube.png
国外媒体 = smart, include-other-group=所有节点, policy-regex-filter=(?=.*良心云)(?=.*新加坡)|(?=.*红杏云)(?=.*新加坡)|(?=.*ovo)(?=.*新加坡), icon-url=https://testingcf.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/ForeignMedia.png

# > 外部节点
香港节点 = smart, include-other-group=所有节点, policy-regex-filter=(🇭🇰)|(香港)|(Hong)|(HK), icon-url=https://testingcf.jsdelivr.net/gh/Semporia/Hand-Painted-icon/Rounded_Rectangle/Hong_Kong.png
台湾节点 = smart, include-other-group=所有节点, policy-regex-filter=(🇨🇳)|(台湾)|(Tai)|(TW), icon-url=https://testingcf.jsdelivr.net/gh/Semporia/Hand-Painted-icon/Rounded_Rectangle/Taiwan.png
美国节点 = smart, include-other-group=所有节点, policy-regex-filter=(🇺🇸)|(美国)|(States)|(US), icon-url=https://testingcf.jsdelivr.net/gh/Semporia/Hand-Painted-icon/Rounded_Rectangle/United_States.png
日本节点 = smart, include-other-group=所有节点, policy-regex-filter=(🇯🇵)|(日本)|(Japan)|(JP), icon-url=https://testingcf.jsdelivr.net/gh/Semporia/Hand-Painted-icon/Rounded_Rectangle/Japan.png
韩国节点 = smart, include-other-group=所有节点, policy-regex-filter=(🇰🇷)|(韩国)|(Korea)|(KR), icon-url=https://testingcf.jsdelivr.net/gh/Semporia/Hand-Painted-icon/Rounded_Rectangle/South_Korea.png
新加坡节点 = smart, include-other-group=所有节点, policy-regex-filter=(🇸🇬)|(新加坡)|(Singapore)|(SG), icon-url=https://testingcf.jsdelivr.net/gh/Semporia/Hand-Painted-icon/Rounded_Rectangle/Singapore.png
所有节点 = select, policy-path=http://192.168.0.103:3003/download/collection/subs?target=Surge, icon-url=https://testingcf.jsdelivr.net/gh/Semporia/Hand-Painted-icon/Universal/Final.png

[Rule]
DOMAIN,ptest-1.ipcheck.ing,DIRECT
DOMAIN,ptest-2.ipcheck.ing,节点选择
DOMAIN,ptest-3.ipcheck.ing,香港节点
DOMAIN,ptest-4.ipcheck.ing,台湾节点
DOMAIN,ptest-5.ipcheck.ing,美国节点
DOMAIN,ptest-6.ipcheck.ing,日本节点
DOMAIN,ptest-7.ipcheck.ing,韩国节点
DOMAIN,ptest-8.ipcheck.ing,新加坡节点
RULE-SET,https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script/rule/Surge/Apple/Apple_All_No_Resolve.list,DIRECT
RULE-SET,https://testingcf.jsdelivr.net/gh/fantasyxby/gadgets/surge-rules/category-ai-!cn.list,人工智能
RULE-SET,https://testingcf.jsdelivr.net/gh/fantasyxby/gadgets/surge-rules/category-cryptocurrency.list,新加坡节点
RULE-SET,https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script/rule/Surge/DMM/DMM.list,日本节点
RULE-SET,https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script/rule/Surge/YouTube/YouTube.list,YouTube
RULE-SET,https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script/rule/Surge/TikTok/TikTok.list,国外媒体
RULE-SET,https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script/rule/Surge/Instagram/Instagram.list,国外媒体
RULE-SET,https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script/rule/Surge/Telegram/Telegram.list,国外媒体
RULE-SET,https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script/rule/Surge/Proxy/Proxy_All_No_Resolve.list,节点选择
RULE-SET,https://testingcf.jsdelivr.net/gh/Loyalsoldier/surge-rules@release/ruleset/proxy.txt,节点选择
RULE-SET,https://testingcf.jsdelivr.net/gh/blackmatrix7/ios_rule_script/rule/Surge/ChinaMax/ChinaMax_All.list,DIRECT
RULE-SET,https://testingcf.jsdelivr.net/gh/Loyalsoldier/surge-rules@release/ruleset/direct.txt,DIRECT
RULE-SET,https://testingcf.jsdelivr.net/gh/Loyalsoldier/surge-rules@release/ruleset/cncidr.txt,DIRECT
RULE-SET,LAN,DIRECT
GEOIP,CN,DIRECT
FINAL,节点选择,dns-failed

[MITM]
ca-passphrase = F6409697
ca-p12 = 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
